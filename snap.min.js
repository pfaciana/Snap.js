/*
 * Snap.js
 *
 * Copyright 2013, Jacob Kelley - http://jakiestfu.com/
 * Released under the MIT Licence
 * http://opensource.org/licenses/MIT
 *
 * Github:  http://github.com/jakiestfu/Snap.js/
 * Version: 1.9.4
 */
(function(e,t){"use strict";var n=n||function(n){var a=this,s={element:null,dragger:null,toggleLeft:null,toggleRight:null,tapToClose:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,touchToDrag:!0,slideIntent:40,minDragDistance:5},r={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},i=null,o={},l={hasTouch:"ontouchstart"in t.documentElement||e.navigator.msPointerEnabled,eventType:function(e){var t={down:l.hasTouch?"touchstart":"mousedown",move:l.hasTouch?"touchmove":"mousemove",up:l.hasTouch?"touchend":"mouseup",out:l.hasTouch?"touchcancel":"mouseout"};return t[e]},page:function(e,t){return l.hasTouch&&t.touches.length&&t.touches[0]?t.touches[0]["page"+e]:t["page"+e]},klass:{has:function(e,t){return-1!==e.className.indexOf(t)},add:function(e,t){!l.klass.has(e,t)&&s.addBodyClasses&&(e.className+=" "+t)},remove:function(e,t){s.addBodyClasses&&(e.className=e.className.replace(t,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(e){return i=e,"function"==typeof o[e]?o[e].call():void 0},vendor:function(){var e,n=t.createElement("div"),a="webkit Moz O ms".split(" ");for(e in a)if(void 0!==n.style[a[e]+"Transition"])return a[e]},transitionCallback:function(){return"Moz"===r.vendor||"ms"===r.vendor?"transitionend":r.vendor+"TransitionEnd"},canTransform:function(){return void 0!==s.element.style[r.vendor+"Transform"]},deepExtend:function(e,t){var n;for(n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},l.deepExtend(e[n],t[n])):e[n]=t[n];return e},angleOfDrag:function(e,t){var n,a;return a=Math.atan2(-(r.startDragY-t),r.startDragX-e),0>a&&(a+=2*Math.PI),n=Math.floor(a*(180/Math.PI)-180),0>n&&n>-180&&(n=360-Math.abs(n)),Math.abs(n)},events:{addEvent:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},removeEvent:function(e,t,n){return e.addEventListener?e.removeEventListener(t,n,!1):e.attachEvent?e.detachEvent("on"+t,n):void 0},prevent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},parentUntil:function(e,t){for(var n="string"==typeof t;e.parentNode;){if(n&&e.getAttribute&&e.getAttribute(t))return e;if(!n&&e===t)return e;e=e.parentNode}return null}},d={translate:{get:{matrix:function(t){if(l.canTransform()){var n=e.getComputedStyle(s.element)[r.vendor+"Transform"].match(/\((.*)\)/),a=8;return n?(n=n[1].split(","),16===n.length&&(t+=a),parseInt(n[t],10)):0}return parseInt(s.element.style.left,10)}},easeCallback:function(){s.element.style[r.vendor+"Transition"]="",r.translation=d.translate.get.matrix(4),r.easing=!1,clearInterval(r.animatingInterval),0===r.easingTo&&(l.klass.remove(t.body,"snapjs-right"),l.klass.remove(t.body,"snapjs-left")),l.dispatchEvent("animated"),l.events.removeEvent(s.element,l.transitionCallback(),d.translate.easeCallback)},easeTo:function(e){l.canTransform()?(r.easing=!0,r.easingTo=e,s.element.style[r.vendor+"Transition"]="all "+s.transitionSpeed+"s "+s.easing,r.animatingInterval=setInterval(function(){l.dispatchEvent("animating")},1),l.events.addEvent(s.element,l.transitionCallback(),d.translate.easeCallback),d.translate.x(e),0===e&&(s.element.style[r.vendor+"Transform"]="")):(r.translation=e,d.translate.x(e),"close"===i&&(l.klass.remove(t.body,"snapjs-right"),l.klass.remove(t.body,"snapjs-left")))},x:function(n){if(!("left"===s.disable&&n>0||"right"===s.disable&&0>n))if(s.hyperextensible||(n===s.maxPosition||n>s.maxPosition?n=s.maxPosition:(n===s.minPosition||n<s.minPosition)&&(n=s.minPosition)),n=parseInt(n,10),isNaN(n)&&(n=0),l.canTransform()){var a="translate3d("+n+"px, 0,0)";s.element.style[r.vendor+"Transform"]=a}else s.element.style.width=(e.innerWidth||t.documentElement.clientWidth)+"px",s.element.style.left=n+"px",s.element.style.right=""}},drag:{listen:function(){r.translation=0,r.easing=!1,l.events.addEvent(s.element,l.eventType("down"),d.drag.startDrag),l.events.addEvent(s.element,l.eventType("move"),d.drag.dragging),l.events.addEvent(s.element,l.eventType("up"),d.drag.endDrag)},stopListening:function(){l.events.removeEvent(s.element,l.eventType("down"),d.drag.startDrag),l.events.removeEvent(s.element,l.eventType("move"),d.drag.dragging),l.events.removeEvent(s.element,l.eventType("up"),d.drag.endDrag)},startDrag:function(e){var t=e.target?e.target:e.srcElement,n=l.parentUntil(t,"data-snap-ignore");if(n)return void l.dispatchEvent("ignore");if(s.dragger){var a=l.parentUntil(t,s.dragger);if(!a&&r.translation!==s.minPosition&&r.translation!==s.maxPosition)return}l.dispatchEvent("start"),s.element.style[r.vendor+"Transition"]="",r.isDragging=!0,r.hasIntent=null,r.intentChecked=!1,r.startDragX=l.page("X",e),r.startDragY=l.page("Y",e),r.dragWatchers={current:0,last:0,hold:0,state:""},r.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(e){if(r.isDragging&&s.touchToDrag){var n,a=l.page("X",e),i=l.page("Y",e),o=r.translation,c=d.translate.get.matrix(4),g=a-r.startDragX,h=c>0,p=g;if(r.intentChecked&&!r.hasIntent)return;if(s.addBodyClasses&&(c>0?(l.klass.add(t.body,"snapjs-left"),l.klass.remove(t.body,"snapjs-right")):0>c&&(l.klass.add(t.body,"snapjs-right"),l.klass.remove(t.body,"snapjs-left"))),r.hasIntent===!1||null===r.hasIntent){var u=l.angleOfDrag(a,i),m=u>=0&&u<=s.slideIntent||360>=u&&u>360-s.slideIntent,f=u>=180&&u<=180+s.slideIntent||180>=u&&u>=180-s.slideIntent;r.hasIntent=f||m?!0:!1,r.intentChecked=!0}if(s.minDragDistance>=Math.abs(a-r.startDragX)||r.hasIntent===!1)return;l.events.prevent(e),l.dispatchEvent("drag"),r.dragWatchers.current=a,r.dragWatchers.last>a?("left"!==r.dragWatchers.state&&(r.dragWatchers.state="left",r.dragWatchers.hold=a),r.dragWatchers.last=a):r.dragWatchers.last<a&&("right"!==r.dragWatchers.state&&(r.dragWatchers.state="right",r.dragWatchers.hold=a),r.dragWatchers.last=a),h?(s.maxPosition<c&&(n=(c-s.maxPosition)*s.resistance,p=g-n),r.simpleStates={opening:"left",towards:r.dragWatchers.state,hyperExtending:s.maxPosition<c,halfway:c>s.maxPosition/2,flick:Math.abs(r.dragWatchers.current-r.dragWatchers.hold)>s.flickThreshold,translation:{absolute:c,relative:g,sinceDirectionChange:r.dragWatchers.current-r.dragWatchers.hold,percentage:c/s.maxPosition*100}}):(s.minPosition>c&&(n=(c-s.minPosition)*s.resistance,p=g-n),r.simpleStates={opening:"right",towards:r.dragWatchers.state,hyperExtending:s.minPosition>c,halfway:c<s.minPosition/2,flick:Math.abs(r.dragWatchers.current-r.dragWatchers.hold)>s.flickThreshold,translation:{absolute:c,relative:g,sinceDirectionChange:r.dragWatchers.current-r.dragWatchers.hold,percentage:c/s.minPosition*100}}),d.translate.x(p+o)}},endDrag:function(e){if(r.isDragging){l.dispatchEvent("end");var t=d.translate.get.matrix(4)||0;if(0===r.dragWatchers.current&&0!==t&&s.tapToClose===!0)return l.dispatchEvent("tapToClose"),l.events.prevent(e),d.translate.easeTo(0),r.isDragging=!1,void(r.startDragX=0);"left"===r.simpleStates.opening?r.simpleStates.halfway||r.simpleStates.hyperExtending||r.simpleStates.flick?r.simpleStates.flick&&"left"===r.simpleStates.towards?d.translate.easeTo(0):(r.simpleStates.flick&&"right"===r.simpleStates.towards||r.simpleStates.halfway||r.simpleStates.hyperExtending)&&d.translate.easeTo(s.maxPosition):d.translate.easeTo(0):"right"===r.simpleStates.opening&&(r.simpleStates.halfway||r.simpleStates.hyperExtending||r.simpleStates.flick?r.simpleStates.flick&&"right"===r.simpleStates.towards?d.translate.easeTo(0):(r.simpleStates.flick&&"left"===r.simpleStates.towards||r.simpleStates.halfway||r.simpleStates.hyperExtending)&&d.translate.easeTo(s.minPosition):d.translate.easeTo(0)),r.isDragging=!1,r.startDragX=l.page("X",e)}}},toggle:{attachEvent:function(e,t,n){function s(){return"tapToClose"===i?!1:void(a.state().state!=t?a.open(t):a.close())}e.addEventListener?e.addEventListener(n,s):e.attachEvent&&e.attachEvent(n,s)},addEvent:function(e){var t,n="toggle"+e.charAt(0).toUpperCase()+e.slice(1),a=s[n];if(null===a)return!1;for(a=a instanceof Array||a.length>0?a:[a],t=0;t<a.length;t++)d.toggle.attachEvent(a[t],e,"click")},listen:function(){d.toggle.addEvent("left"),d.toggle.addEvent("right")}},close:{attachEvent:function(e,t){function n(){return"tapToClose"===i||"close"===i?!1:void("open"!=i&&a.close())}e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent(t,n)},listen:function(){var e,t=s.tapToClose;if(null===t||t===!1||t===!0)return!1;for(t=t instanceof Array||t.length>0?t:[t],e=0;e<t.length;e++)d.close.attachEvent(t[e],"click")}}},c=function(e){e.element&&(l.deepExtend(s,e),void 0!==s.element.length&&s.element.length>0&&(s.element=s.element[0]),r.vendor=l.vendor(),d.drag.listen(),d.toggle.listen(),d.close.listen())};this.open=function(e){l.dispatchEvent("open"),l.klass.remove(t.body,"snapjs-expand-left"),l.klass.remove(t.body,"snapjs-expand-right"),"left"===e?(r.simpleStates.opening="left",r.simpleStates.towards="right",l.klass.add(t.body,"snapjs-left"),l.klass.remove(t.body,"snapjs-right"),d.translate.easeTo(s.maxPosition)):"right"===e&&(r.simpleStates.opening="right",r.simpleStates.towards="left",l.klass.remove(t.body,"snapjs-left"),l.klass.add(t.body,"snapjs-right"),d.translate.easeTo(s.minPosition))},this.close=function(){l.dispatchEvent("close"),d.translate.easeTo(0)},this.expand=function(n){var a=e.innerWidth||t.documentElement.clientWidth;"left"===n?(l.dispatchEvent("expandLeft"),l.klass.add(t.body,"snapjs-expand-left"),l.klass.remove(t.body,"snapjs-expand-right")):(l.dispatchEvent("expandRight"),l.klass.add(t.body,"snapjs-expand-right"),l.klass.remove(t.body,"snapjs-expand-left"),a*=-1),d.translate.easeTo(a)},this.on=function(e,t){return o[e]=t,this},this.off=function(e){o[e]&&(o[e]=!1)},this.enable=function(){l.dispatchEvent("enable"),d.drag.listen()},this.disable=function(){l.dispatchEvent("disable"),d.drag.stopListening()},this.settings=function(e){l.deepExtend(s,e)},this.state=function(){var e,t=d.translate.get.matrix(4);return e=t===s.maxPosition?"left":t===s.minPosition?"right":"closed",{state:e,info:r.simpleStates}},this.prevEvent=function(){return i},this.hasTouch=function(){return l.hasTouch||!1},c(n)};"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"==typeof ender&&(this.Snap=n),"function"==typeof define&&define.amd&&define("snap",[],function(){return n})}).call(this,window,document);